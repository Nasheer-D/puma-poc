<ng-template #paymentWalletModal let-d="dismiss" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content options-modal">
      <div class="container modal-header">
        <div class="row close-button">
          <button type="button" class="close" aria-label="Close" (click)="d()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="row col-md-12">
          <div class="col-lg-12">
            <label class="modal-credits">You choose
              <b>{{itemPrice | number: '1.2-2'}} PumaPay</b> tokens.</label>
          </div>
          <div class="col-lg-12">
            <label class="title-name">Scan to complete your purchase</label>
          </div>
        </div>
      </div>
      <div class="modal-body">
        <div class="container transaction-tool">
          <div class="row">
            <div class="container options-container col-md">
              <div class="col modal-email" *ngIf="completedStatus == 2">
                <label>Connect with your
                  <a href="https://outlook.live.com/owa/?authRedirect=true">email </a> to save this image for later access.</label>
              </div>
              <div class="container qr-container">
                <qrcode [qrdata]="txDataAsString" [size]="150" [level]="'M'"></qrcode>
              </div>
              <div class="col modal-scan-qr">
                <label>Scan a QR code with the app to complete the transaction.</label>
              </div>
              <div class="col modal-link">
                <label>Don't have PumaPay wallet?</label>
              </div>
              <div class="col">
                <div class="container download-option-image col-sm-12">
                  <a href="https://itunes.apple.com/us/genre/ios/id36?mt=8">
                    <img class="app-store-apple" src="../../../assets/images/app-store.png">
                  </a>
                  <a href="https://play.google.com/store?hl=en">
                    <img class="app-store-google" src="../../../assets/images/google-play-badge.png">
                  </a>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="container transaction-progress-container">
                <div class="row">
                  <div class="container transaction-progress" [ngClass]="{'inactiveBackgroundColor': activeRequest == false && completedRequest == 0}">
                    <div class="row">
                      <div class="col-sm-9">
                        <label class="transaction-text" [ngClass]="{'transaction-text-inactive': activeRequest == false && completedRequest == 0}">Sending transaction request</label>
                        <div class="span status" *ngIf="activeRequest == false && completedRequest ==  0">Waiting</div>
                        <div class="span status" *ngIf="activeRequest == true && completedRequest ==  1">In Progress...</div>
                        <div class="span status" *ngIf="activeRequest == true && completedRequest ==  2">Complete</div>
                      </div>
                      <div class="col-sm-3">
                        <app-loading-spinner *ngIf="activeRequest == true && completedRequest == 1"></app-loading-spinner>
                        <label class="numberLayout" *ngIf="activeRequest == false && completedRequest == 0">1</label>
                        <img src="../../../../../assets/images/success-btn.png" class="imageSizeSuccess" *ngIf="activeRequest == true && completedRequest == 2 ">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="container transaction-progress" [ngClass]="{'inactiveBackgroundColor': activeResponse == false && completedResponse == 0}">
                    <div class="row">
                      <div class="col-sm-9">
                        <label class="transaction-text" [ngClass]="{'transaction-text-inactive': activeResponse == false && completedResponse == 0}">Transaction response</label>
                        <div class="span status" *ngIf="activeResponse == false && completedResponse == 0">Waiting</div>
                        <div class="span status" *ngIf="activeResponse == true && completedResponse == 1">In Progress...</div>
                        <div class="span status" *ngIf="activeResponse == true && completedResponse == 2">Complete</div>
                      </div>
                      <div class="col-sm-3">
                        <app-loading-spinner *ngIf="activeResponse == true && completedResponse == 1"></app-loading-spinner>
                        <label class="numberLayout" *ngIf="activeResponse == false && completedResponse == 0">2</label>
                        <img src="../../../../../assets/images/success-btn.png" class="imageSizeSuccess" *ngIf="activeResponse == true && completedResponse == 2">
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="container transaction-progress" [ngClass]="{'inactiveBackgroundColor': activeStatus == false, 'border-failed-transaction': activeStatus == true && completedStatus == 3, 'border-succesfull-transaction': activeStatus == true && completedStatus == 2}">
                    <div class="row">
                      <div class="col-sm-9">
                        <label class="transaction-text" [ngClass]="{'transaction-text-inactive': activeStatus == false && completedStatus == 0}">Transaction status</label>
                        <div class="span status" *ngIf="activeStatus == false && completedStatus == 0">Waiting</div>
                        <div class="span status" *ngIf="activeStatus == true && completedStatus == 1">In Progress...</div>
                        <div class="span status" *ngIf="activeStatus == true && completedStatus == 2">Transation has been approved!</div>
                        <div class="span status" *ngIf="activeStatus == true && completedStatus == 3">Transation was failed.Try again.</div>
                      </div>
                      <div class="col-sm-3">
                        <app-loading-spinner *ngIf="activeStatus == true && completedStatus == 1"></app-loading-spinner>
                        <label class="numberLayout" *ngIf="activeStatus == false && completedStatus == 0">3</label>
                        <img src="../../../../../assets/images/success-btn.png" class="imageSizeSuccess" *ngIf="activeStatus == true && completedStatus == 2">
                        <img src="../../../../../assets/images/fail-btn.png" class="imageSizeFail" *ngIf="activeStatus == true && completedStatus == 3">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="container">
                <div class="row">
                  <div class="col-6">
                    <button class="btn btn-outline-primary btn-layout" disabled="{{disableElements}}">See your balance</button>
                  </div>
                  <div class="row-6 ">
                    <button class="btn btn-outline-primary btn-layout" (click)="d() " disabled="{{disableElements}}" *ngIf="completedStatus == 0 || completedStatus == 1">Back to image</button>
                    <button class="btn btn-outline-primary btn-layout" (click)="d() " disabled="{{disableElements}}" *ngIf="completedStatus == 2">Download Image</button>
                    <button class="btn btn-outline-primary btn-layout" (click)="d() " disabled="{{disableElements}}" *ngIf="completedStatus == 3">Try Again</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
